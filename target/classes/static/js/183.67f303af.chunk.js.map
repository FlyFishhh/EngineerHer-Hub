{"version":3,"file":"static/js/183.67f303af.chunk.js","mappings":"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","sources":["views/messagesDetail/style.js","views/messagesDetail/index.jsx","../node_modules/antd/es/_util/hooks/useForceUpdate.js","../node_modules/antd/es/comment/index.js"],"sourcesContent":["import styled from \"styled-components\";\r\n\r\nexport const MessagesDetailWrapper = styled.div`\r\n  > .content {\r\n    width: 970px;\r\n    margin: 0 auto;\r\n\r\n\r\n    .mainbox{\r\n      border: 1px solid #ccc;\r\n      border-radius: 10px;\r\n      margin-top: 30px;\r\n      padding: 30px;\r\n      background: #fff;\r\n    }\r\n\r\n    .messagebox{\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: 15px;\r\n\r\n      .mine{\r\n        display: flex;\r\n        flex-direction: row-reverse;\r\n        .box{\r\n          padding: 15px;\r\n          border-radius: 10px;\r\n          background-color: #03a7ff33;\r\n          display: flex;\r\n          gap: 15px;\r\n          .time{\r\n            fons-size: 12px;\r\n            line-height: 20px;\r\n          }\r\n        }\r\n      }\r\n\r\n      .other{\r\n        display: flex;\r\n        .box{\r\n          padding: 15px;\r\n          border-radius: 10px;\r\n          background-color: #ff454533;\r\n          display: flex;\r\n          gap: 15px;\r\n          .time{\r\n            fons-size: 12px;\r\n            line-height: 20px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .topinfo {\r\n      display: flex;\r\n      gap: 40px;\r\n      align-items: center;\r\n\r\n\r\n      .contentbox {\r\n        display: flex;\r\n        flex-direction: column;\r\n        height: 55px;\r\n        width: 100%;\r\n        justify-content: space-around;\r\n      }\r\n\r\n      .top {\r\n        display: flex;\r\n        gap: 50px;\r\n        .time {\r\n        }\r\n      }\r\n    }\r\n\r\n    .content{\r\n      margin-top: 30px;\r\n    }\r\n    .imgbox {\r\n      display: flex;\r\n      gap: 15px;\r\n      flex-wrap: wrap;\r\n      margin-top: 30px;\r\n\r\n      .imgitem{\r\n        width: 313px;\r\n        height: 313px;\r\n        img{\r\n          width: 100%;\r\n          height: 100%;\r\n        }\r\n      }\r\n    }\r\n    .comment{\r\n      margin-top: 30px;\r\n    }\r\n  }\r\n`;\r\n","import { MessagesDetailWrapper } from \"./style\";\r\nimport {\r\n  Button,\r\n  Avatar,\r\n  Image,\r\n  Comment,\r\n  Divider,\r\n  Form,\r\n  Input,\r\n  List,\r\n} from \"antd\";\r\nimport React, { memo, useEffect, useState } from \"react\";\r\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, useNavigate, useParams } from \"react-router-dom\";\r\nimport { getMessage, sendMessage } from \"@/services/modules/home\";\r\nconst { TextArea } = Input;\r\nconst Editor = ({ onChange, onSubmit, submitting, value }) => (\r\n  <>\r\n    <Form.Item>\r\n      <TextArea rows={4} maxLength={1000} onChange={onChange} value={value} />\r\n    </Form.Item>\r\n    <Form.Item>\r\n      <Button\r\n        htmlType=\"submit\"\r\n        loading={submitting}\r\n        onClick={onSubmit}\r\n        type=\"primary\"\r\n      >\r\n        Send Message\r\n      </Button>\r\n    </Form.Item>\r\n  </>\r\n);\r\n\r\nconst Detail = memo(() => {\r\n  const { id } = useParams();\r\n  const [dataInfo, setDataInfo] = useState([]);\r\n  const getInfo = async () => {\r\n    try {\r\n      if (id) {\r\n        const res = await getMessage(id);\r\n        if (res.code === 200) {\r\n          let temp = res.data.reverse();\r\n          setDataInfo(temp);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [value, setValue] = useState(\"\");\r\n  const handleSubmit = () => {\r\n    if (!value) return;\r\n    setSubmitting(true);\r\n    let data = {\r\n      fromId: localStorage.getItem(\"token\"),\r\n      toId: id,\r\n      message: value,\r\n    };\r\n    sendMessage(data).then((res) => {\r\n      if (res.code === 200) {\r\n        setSubmitting(false);\r\n        setValue(\"\");\r\n        getInfo();\r\n      }\r\n    });\r\n  };\r\n  const handleChange = (e) => {\r\n    setValue(e.target.value);\r\n  };\r\n\r\n  useEffect(() => {\r\n    getInfo();\r\n  }, []);\r\n  return (\r\n    <MessagesDetailWrapper>\r\n      <div className=\"content\">\r\n        <div className=\"mainbox\">\r\n          <div className=\"messagebox\">\r\n            {dataInfo.map((item, index) => {\r\n              return item.userId == localStorage.getItem(\"token\") ? (\r\n                <div className=\"mine\" key={index}>\r\n                  <div className=\"box\">\r\n                    <div>\r\n                      <Avatar alt=\"Han Solo\">User</Avatar>\r\n                    </div>\r\n                    <div>\r\n                      <div className=\"time\">{item.name + ' ' +item.createTime}</div>\r\n                      <div>{item.message}</div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"other\" key={index}>\r\n                  <div className=\"box\">\r\n                    <div>\r\n                      <Avatar alt=\"Han Solo\">User</Avatar>\r\n                    </div>\r\n                    <div>\r\n                      <div className=\"time\">{item.name + ' ' +item.createTime}</div>\r\n                      <div>{item.message}</div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n          <div className=\"comment\">\r\n            <>\r\n              <Comment\r\n                avatar={<Avatar alt=\"Han Solo\">User</Avatar>}\r\n                content={\r\n                  <Editor\r\n                    onChange={handleChange}\r\n                    onSubmit={handleSubmit}\r\n                    submitting={submitting}\r\n                    value={value}\r\n                  />\r\n                }\r\n              />\r\n            </>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </MessagesDetailWrapper>\r\n  );\r\n});\r\n\r\nexport default Detail;\r\n","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nexport default function useForceUpdate() {\n  var _React$useReducer = React.useReducer(function (x) {\n      return x + 1;\n    }, 0),\n    _React$useReducer2 = _slicedToArray(_React$useReducer, 2),\n    forceUpdate = _React$useReducer2[1];\n  return forceUpdate;\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { ConfigContext } from '../config-provider';\nvar Comment = function Comment(_a) {\n  var actions = _a.actions,\n    author = _a.author,\n    avatar = _a.avatar,\n    children = _a.children,\n    className = _a.className,\n    content = _a.content,\n    customizePrefixCls = _a.prefixCls,\n    datetime = _a.datetime,\n    otherProps = __rest(_a, [\"actions\", \"author\", \"avatar\", \"children\", \"className\", \"content\", \"prefixCls\", \"datetime\"]);\n  var _React$useContext = React.useContext(ConfigContext),\n    getPrefixCls = _React$useContext.getPrefixCls,\n    direction = _React$useContext.direction;\n  var renderNested = function renderNested(prefixCls, nestedChildren) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames(\"\".concat(prefixCls, \"-nested\"))\n    }, nestedChildren);\n  };\n  var prefixCls = getPrefixCls('comment', customizePrefixCls);\n  var avatarDom = avatar ? ( /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-avatar\")\n  }, typeof avatar === 'string' ? /*#__PURE__*/React.createElement(\"img\", {\n    src: avatar,\n    alt: \"comment-avatar\"\n  }) : avatar)) : null;\n  var actionDom = actions && actions.length ? ( /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"\".concat(prefixCls, \"-actions\")\n  }, actions.map(function (action, index) {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: \"action-\".concat(index)\n    }, action) // eslint-disable-line react/no-array-index-key\n    ;\n  }))) : null;\n  var authorContent = (author || datetime) && ( /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-content-author\")\n  }, author && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"\".concat(prefixCls, \"-content-author-name\")\n  }, author), datetime && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"\".concat(prefixCls, \"-content-author-time\")\n  }, datetime)));\n  var contentDom = /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-content\")\n  }, authorContent, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-content-detail\")\n  }, content), actionDom);\n  var cls = classNames(prefixCls, _defineProperty({}, \"\".concat(prefixCls, \"-rtl\"), direction === 'rtl'), className);\n  return /*#__PURE__*/React.createElement(\"div\", _extends({}, otherProps, {\n    className: cls\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-inner\")\n  }, avatarDom, contentDom), children ? renderNested(prefixCls, children) : null);\n};\nexport default Comment;"],"names":["MessagesDetailWrapper","styled","div","_templateObject","_taggedTemplateLiteral","TextArea","Input","Editor","_ref","onChange","onSubmit","submitting","value","_jsxs","_Fragment","children","_jsx","Form","Item","rows","maxLength","Button","htmlType","loading","onClick","type","memo","id","useParams","dataInfo","setDataInfo","useState","getInfo","async","res","getMessage","code","temp","data","reverse","error","console","log","setSubmitting","setValue","useEffect","className","map","item","index","userId","localStorage","getItem","Avatar","alt","name","createTime","message","Comment","avatar","content","e","target","handleSubmit","fromId","toId","sendMessage","then","useForceUpdate","_React$useReducer","React","x","_slicedToArray","__rest","s","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","_a","actions","author","customizePrefixCls","prefixCls","datetime","otherProps","_React$useContext","ConfigContext","getPrefixCls","direction","avatarDom","concat","src","actionDom","action","key","authorContent","contentDom","cls","classNames","_defineProperty","_extends","nestedChildren","renderNested"],"sourceRoot":""}