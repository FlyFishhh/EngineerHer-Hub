{"version":3,"file":"static/js/809.e298ba08.chunk.js","mappings":"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","sources":["views/addpost/style.js","../node_modules/@ant-design/icons-svg/es/asn/PictureOutlined.js","../node_modules/@ant-design/icons/es/icons/PictureOutlined.js","views/addpost/index.jsx"],"sourcesContent":["import styled from \"styled-components\";\r\n\r\nexport const AddpostWrapper = styled.div`\r\n  > .content {\r\n    width: 970px;\r\n    margin: 0 auto;\r\n\r\n    .postarea {\r\n      height: 75vh;\r\n      margin-top: 30px;\r\n      border: 1px solid #eee;\r\n      background: #fff;\r\n      padding: 15px;\r\n      border-radius: 10px;\r\n\r\n      .ant-btn-primary {\r\n        margin-top: 20px;\r\n        color: #fff;\r\n        border-color: #000;\r\n        background: #000;\r\n        text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.12);\r\n        box-shadow: 0 2px 0 rgba(0, 0, 0, 0.045);\r\n      }\r\n    }\r\n  }\r\n`;\r\n","// This icon file is generated automatically.\nvar PictureOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2zM304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z\" } }] }, \"name\": \"picture\", \"theme\": \"outlined\" };\nexport default PictureOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport PictureOutlinedSvg from \"@ant-design/icons-svg/es/asn/PictureOutlined\";\nimport AntdIcon from '../components/AntdIcon';\nvar PictureOutlined = function PictureOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: PictureOutlinedSvg\n  }));\n};\nvar RefIcon = /*#__PURE__*/React.forwardRef(PictureOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'PictureOutlined';\n}\nexport default RefIcon;","import { AddpostWrapper } from \"./style\";\r\nimport { PlusOutlined, PictureOutlined } from \"@ant-design/icons\";\r\nimport { Input, Select, Button, Upload, Modal, Tabs,message } from \"antd\";\r\nimport React, { memo, useEffect, useContext, useState } from \"react\";\r\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { addpost } from \"@/services/modules/home\";\r\nimport { SearchContext } from \"@/SearchContext\";\r\nconst Addpost = memo(() => {\r\n  const navigate = useNavigate();\r\n  const { handleSearchTermChange } = useContext(SearchContext);\r\n  const { TextArea } = Input;\r\n  const tabNames = [\r\n    {\r\n      value: \"Electrical Engineering\",\r\n      label: \"Electrical Engineering\",\r\n    },\r\n    {\r\n      value: \"Mechanical Engineering\",\r\n      label: \"Mechanical Engineering\",\r\n    },\r\n    {\r\n      value: \"Computer Engineering\",\r\n      label: \"Computer Engineering\",\r\n    },\r\n    {\r\n      value: \"Aerospace Engineering\",\r\n      label: \"Aerospace Engineering\",\r\n    },\r\n    {\r\n      value: \"Chemical Engineering\",\r\n      label: \"Chemical Engineering\",\r\n    },\r\n    {\r\n      value: \"Civil Engineering\",\r\n      label: \"Civil Engineering\",\r\n    },\r\n    {\r\n      value: \"Environmental Engineering\",\r\n      label: \"Environmental Engineering\",\r\n    },\r\n    {\r\n      value: \"Biomedical Engineering\",\r\n      label: \"Biomedical Engineering\",\r\n    },\r\n    {\r\n      value: \"Industrial Engineering\",\r\n      label: \"Industrial Engineering\",\r\n    },\r\n    {\r\n      value: \"Materials Engineering\",\r\n      label: \"Materials Engineering\",\r\n    },\r\n    {\r\n      value: \"Nuclear Engineering\",\r\n      label: \"Nuclear Engineering\",\r\n    },\r\n    {\r\n      value: \"Petroleum Engineering\",\r\n      label: \"Petroleum Engineering\",\r\n    },\r\n    {\r\n      value: \"Ocean Engineering\",\r\n      label: \"Ocean Engineering\",\r\n    },\r\n    {\r\n      value: \"Systems Engineering\",\r\n      label: \"Systems Engineering\",\r\n    },\r\n    {\r\n      value: \"Biotechnology Engineering\",\r\n      label: \"Biotechnology Engineering\",\r\n    },\r\n  ];\r\n\r\n  const [content, setContent] = useState(\"\");\r\n  const [type, setType] = useState(\"\");\r\n  const [imgUrl, setImgUrl] = useState(\"\");\r\n\r\n  const contentOnChange = (e) => {\r\n    setContent(e.target.value);\r\n  };\r\n  const typeOnChange = (value) => {\r\n    setType(value);\r\n  };\r\n  const submitpost = async () => {\r\n    try {\r\n      const imgUrl = fileList.map((item) => {\r\n        return item.response.data;\r\n      });\r\n      let param = {\r\n        content: content,\r\n        type: type,\r\n        imgUrl: imgUrl.join(\",\"),\r\n      };\r\n      const res = await addpost(param);\r\n      if (res.code === 200) {\r\n        message.success(\"successful!\");\r\n        handleSearchTermChange(\"\");\r\n        navigate(\"/home\");\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const getBase64 = (file) =>\r\n    new Promise((resolve, reject) => {\r\n      const reader = new FileReader();\r\n      reader.readAsDataURL(file);\r\n      reader.onload = () => resolve(reader.result);\r\n      reader.onerror = (error) => reject(error);\r\n    });\r\n\r\n  const [previewOpen, setPreviewOpen] = useState(false);\r\n  const [previewImage, setPreviewImage] = useState(\"\");\r\n  const [previewTitle, setPreviewTitle] = useState(\"\");\r\n  const [fileList, setFileList] = useState([]);\r\n  const handleCancel = () => setPreviewOpen(false);\r\n  const handlePreview = async (file) => {\r\n    if (!file.url && !file.preview) {\r\n      file.preview = await getBase64(file.originFileObj);\r\n    }\r\n    setPreviewImage(file.url || file.preview);\r\n    setPreviewOpen(true);\r\n    setPreviewTitle(\r\n      file.name || file.url.substring(file.url.lastIndexOf(\"/\") + 1)\r\n    );\r\n  };\r\n  const handleUploadChange = ({ fileList: newFileList }) =>\r\n    setFileList(newFileList);\r\n  const uploadButton = (\r\n    <div>\r\n      <PictureOutlined />\r\n      <div\r\n        style={{\r\n          marginTop: 8,\r\n        }}\r\n      >\r\n        Add Pictures\r\n      </div>\r\n    </div>\r\n  );\r\n  return (\r\n    <AddpostWrapper>\r\n      <div className=\"content\">\r\n        <div className=\"postarea\">\r\n          <TextArea\r\n            showCount\r\n            maxLength={1000}\r\n            style={{ height: 280, resize: \"none\" }}\r\n            placeholder=\"Add Text\"\r\n            value={content}\r\n            onChange={contentOnChange}\r\n          />\r\n          <Select\r\n            placeholder=\"choose a tipic\"\r\n            style={{ width: 230, marginTop: 15 }}\r\n            options={tabNames}\r\n            allowClear\r\n            value={type}\r\n            onChange={typeOnChange}\r\n          />\r\n          <div style={{ marginTop: 15 }}>\r\n            <Upload\r\n              action=\"http://agbgxw.natappfree.cc/user/upload\"\r\n              listType=\"picture-card\"\r\n              fileList={fileList}\r\n              onPreview={handlePreview}\r\n              onChange={handleUploadChange}\r\n              maxCount={9}\r\n            >\r\n              {fileList.length >= 9 ? null : uploadButton}\r\n            </Upload>\r\n          </div>\r\n          <div style={{ textAlign: \"center\" }}>\r\n            <Button style={{ width: 200 }} type=\"primary\" onClick={submitpost}>\r\n              Post\r\n            </Button>\r\n          </div>\r\n\r\n          <Modal\r\n            open={previewOpen}\r\n            title={previewTitle}\r\n            footer={null}\r\n            onCancel={handleCancel}\r\n          >\r\n            <img alt=\"example\" style={{ width: \"100%\" }} src={previewImage} />\r\n          </Modal>\r\n        </div>\r\n      </div>\r\n    </AddpostWrapper>\r\n  );\r\n});\r\n\r\nexport default Addpost;\r\n"],"names":["AddpostWrapper","styled","div","_templateObject","_taggedTemplateLiteral","PictureOutlined","props","ref","React","AntdIcon","_objectSpread","icon","PictureOutlinedSvg","memo","navigate","useNavigate","handleSearchTermChange","useContext","SearchContext","TextArea","Input","content","setContent","useState","type","setType","imgUrl","setImgUrl","previewOpen","setPreviewOpen","previewImage","setPreviewImage","previewTitle","setPreviewTitle","fileList","setFileList","uploadButton","_jsxs","children","_jsx","style","marginTop","className","showCount","maxLength","height","resize","placeholder","value","onChange","e","target","Select","width","options","label","allowClear","Upload","action","listType","onPreview","async","file","url","preview","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","getBase64","originFileObj","name","substring","lastIndexOf","_ref","newFileList","maxCount","length","textAlign","Button","onClick","map","item","response","data","param","join","addpost","code","message","success","console","log","Modal","open","title","footer","onCancel","handleCancel","alt","src"],"sourceRoot":""}